"use strict";(self.webpackChunkwhat_do_you_meme=self.webpackChunkwhat_do_you_meme||[]).push([[146],{5146:(Q,F,e)=>{e.r(F),e.d(F,{AuthModule:()=>a});var g=e(6895),o=e(433),d=e(6259),u=e(4650),Z=e(1698),v=e(6518),I=e(2270),w=e(2278),U=e(4144),f=e(9549);function A(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),u.qZA())}function E(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),u.qZA())}function B(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}function S(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}function T(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"),u.qZA())}function _(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}function y(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}class i{constructor(r,n,c,Y){this.authService=r,this.router=n,this.cdr=c,this.avatarService=Y,this.currentAvatar=this.avatarService.avatar$.subscribe(L=>{this.avatar=L,this.cdr.markForCheck()})}ngOnInit(){this.signUpForm=new o.cw({username:new o.NI("",[o.kI.required,o.kI.minLength(4),o.kI.maxLength(12)],[Z.B.isUniqueUsername(this.authService)]),password:new o.NI("",[o.kI.required,o.kI.minLength(8),o.kI.maxLength(20)]),confirmPassword:new o.NI("",[o.kI.required,o.kI.minLength(8),o.kI.maxLength(20)])})}get userData(){return{username:this.signUpForm.value.username,password:this.signUpForm.value.password,image:this.avatar}}onSubmit(){this.authService.signUp(this.userData).subscribe(()=>{this.router.navigate(["lobbies"],{replaceUrl:!0}).catch()})}get isPasswordEqual(){return this.signUpForm.value.password===this.signUpForm.value.confirmPassword}get isFormValid(){return this.signUpForm.valid&&this.signUpForm.dirty}get usernameControl(){return this.signUpForm.get("username")}get passwordControl(){return this.signUpForm.get("password")}get passwordConfirmControl(){return this.signUpForm.get("confirmPassword")}}i.\u0275fac=function(r){return new(r||i)(u.Y36(v.e),u.Y36(d.F0),u.Y36(u.sBO),u.Y36(I.o))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-sign-up-form"]],decls:24,vars:9,consts:[[1,"form"],[1,"form__form",3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","placeholder","medoed","formControlName","username"],["class","form__error",4,"ngIf"],["matInput","","type","password","formControlName","password",1,"form__input"],["matInput","","type","password","formControlName","confirmPassword",1,"form__input"],["type","submit",1,"form__btn",3,"disabled"],[1,"form__error"]],template:function(r,n){1&r&&(u.TgZ(0,"div",0)(1,"form",1),u.NdJ("ngSubmit",function(){return n.onSubmit()}),u._UZ(2,"app-set-picture"),u.TgZ(3,"mat-form-field",2)(4,"mat-label"),u._uU(5,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d:"),u.qZA(),u._UZ(6,"input",3),u.YNc(7,A,2,0,"span",4),u.YNc(8,E,2,0,"span",4),u.qZA(),u.TgZ(9,"mat-form-field",2)(10,"mat-label"),u._uU(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),u.qZA(),u._UZ(12,"input",5),u.YNc(13,B,2,0,"span",4),u.YNc(14,S,2,0,"span",4),u.qZA(),u.TgZ(15,"mat-form-field")(16,"mat-label"),u._uU(17,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),u.qZA(),u._UZ(18,"input",6),u.YNc(19,T,2,0,"span",4),u.YNc(20,_,2,0,"span",4),u.YNc(21,y,2,0,"span",4),u.qZA(),u.TgZ(22,"button",7),u._uU(23," \u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f "),u.qZA()()()),2&r&&(u.xp6(1),u.Q6J("formGroup",n.signUpForm),u.xp6(6),u.Q6J("ngIf",null==n.usernameControl||null==n.usernameControl.errors?null:n.usernameControl.errors.minlength),u.xp6(1),u.Q6J("ngIf",null==n.usernameControl||null==n.usernameControl.errors?null:n.usernameControl.errors.isUserExist),u.xp6(5),u.Q6J("ngIf",null==n.passwordControl||null==n.passwordControl.errors?null:n.passwordControl.errors.minlength),u.xp6(1),u.Q6J("ngIf",null==n.passwordControl||null==n.passwordControl.errors?null:n.passwordControl.errors.maxlength),u.xp6(5),u.Q6J("ngIf",!n.isPasswordEqual&&(null==n.passwordControl?null:n.passwordControl.dirty)&&(null==n.passwordConfirmControl?null:n.passwordConfirmControl.dirty)),u.xp6(1),u.Q6J("ngIf",null==n.passwordConfirmControl||null==n.passwordConfirmControl.errors?null:n.passwordConfirmControl.errors.minlength),u.xp6(1),u.Q6J("ngIf",null==n.passwordConfirmControl||null==n.passwordConfirmControl.errors?null:n.passwordConfirmControl.errors.maxlength),u.xp6(1),u.Q6J("disabled",!(n.isPasswordEqual&&n.isFormValid)||n.signUpForm.pending))},dependencies:[g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,w.j,U.Nt,f.KE,f.hX],changeDetection:0});class m{}m.\u0275fac=function(r){return new(r||m)},m.\u0275cmp=u.Xpm({type:m,selectors:[["app-sign-up-page"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,n){1&r&&(u.TgZ(0,"div",0),u._UZ(1,"app-sign-up-form"),u.qZA())},dependencies:[i]});var C=e(9653),h=e(9884),D=e(8379);function J(t,r){1&t&&(u.TgZ(0,"span",8),u._uU(1,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),u.qZA())}class l{constructor(r){this.store$=r,this.loading$=this.store$.pipe((0,C.Ys)(h.Kv)),this.loaded$=this.store$.pipe((0,C.Ys)(h.FQ)),this.serverError$=this.store$.pipe((0,C.Ys)(h.Mq))}ngOnInit(){this.authForm=new o.cw({username:new o.NI("",[o.kI.required,o.kI.minLength(4),o.kI.maxLength(12)]),password:new o.NI("",[o.kI.required,o.kI.minLength(8),o.kI.maxLength(20)])})}onSubmit(r){this.store$.dispatch((0,D.x4)(r))}get loginControl(){return this.authForm.get("username")}}l.\u0275fac=function(r){return new(r||l)(u.Y36(C.yh))},l.\u0275cmp=u.Xpm({type:l,selectors:[["app-auth-form"]],inputs:{disabled:"disabled"},decls:17,vars:7,consts:[[1,"form"],[1,"form__form",3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","placeholder","\u043b\u043e\u0433\u0438\u043d","formControlName","username"],["matInput","","placeholder","\u043f\u0430\u0440\u043e\u043b\u044c","type","password","formControlName","password"],["class","form__error",4,"ngIf"],[1,"btn",3,"disabled"],["routerLink","/auth/signup",1,"form__link"],[1,"form__error"]],template:function(r,n){1&r&&(u.TgZ(0,"div",0)(1,"form",1),u.NdJ("ngSubmit",function(){return n.onSubmit(n.authForm.value)}),u.TgZ(2,"mat-form-field",2)(3,"mat-label"),u._uU(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d:"),u.qZA(),u._UZ(5,"input",3),u.qZA(),u.TgZ(6,"mat-form-field",2)(7,"mat-label"),u._uU(8,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),u.qZA(),u._UZ(9,"input",4),u.qZA(),u.YNc(10,J,2,0,"span",5),u.ALo(11,"async"),u.TgZ(12,"button",6),u.ALo(13,"async"),u._uU(14," \u0412\u043e\u0439\u0442\u0438 "),u.qZA(),u.TgZ(15,"a",7),u._uU(16,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),u.qZA()()()),2&r&&(u.xp6(1),u.Q6J("formGroup",n.authForm),u.xp6(9),u.Q6J("ngIf",(null==n.loginControl?null:n.loginControl.invalid)&&(null==n.loginControl?null:n.loginControl.dirty)||u.lcZ(11,3,n.serverError$)),u.xp6(2),u.Q6J("disabled",n.authForm.invalid||n.disabled||u.lcZ(13,5,n.loading$)))},dependencies:[g.O5,d.rH,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,U.Nt,f.KE,f.hX,g.Ov]});class p{}p.\u0275fac=function(r){return new(r||p)},p.\u0275cmp=u.Xpm({type:p,selectors:[["app-auth-page"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,n){1&r&&(u.TgZ(0,"div",0),u._UZ(1,"app-auth-form"),u.qZA())},dependencies:[l]});const N=[{path:"",pathMatch:"full",component:p},{path:"signup",component:m}];class s{}s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=u.oAB({type:s}),s.\u0275inj=u.cJS({imports:[d.Bz.forChild(N),d.Bz]});var b=e(4466),q=e(793);class a{}a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({imports:[g.ez,s,o.UX,b.m,q.q]})}}]);
