"use strict";(self.webpackChunkwhat_do_you_meme=self.webpackChunkwhat_do_you_meme||[]).push([[465],{3465:(L,h,a)=>{a.r(h),a.d(h,{DashboardModule:()=>s});var p=a(6895),u=a(4650),i=a(6259),d=a(8379),t=a(433),f=a(1698),C=a(4004);class g{static isValidPassword(o){return r=>o.isValidPassword(r.value).pipe((0,C.U)(e=>e?null:{isPasswordValid:!0}))}}var v=a(9653),D=a(6518),U=a(2270),b=a(6002),F=a(2278),Z=a(4144),c=a(9549),A=a(4859);function w(n,o){1&n&&(u.TgZ(0,"span",9),u._uU(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),u.qZA())}function B(n,o){1&n&&(u.TgZ(0,"span",9),u._uU(1,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 12 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}function P(n,o){1&n&&(u.TgZ(0,"span",9),u._uU(1,"\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),u.qZA())}function T(n,o){1&n&&(u.TgZ(0,"span",9),u._uU(1,"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),u.qZA())}function E(n,o){1&n&&(u.TgZ(0,"span",9),u._uU(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}function I(n,o){1&n&&(u.TgZ(0,"span",9),u._uU(1,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}class l{constructor(o,r,e,y,Y){this.store$=o,this.authService=r,this.router=e,this.userAvatar=y,this.localStorage=Y,this.currentAvatar=this.userAvatar.avatar$.subscribe(S=>this.newAvatar=S)}get usernameControl(){return this.changeUserDataForm.get("login")}get passwordControl(){return this.changeUserDataForm.get("password")}get confirmPasswordControl(){return this.changeUserDataForm.get("confirmPassword")}ngOnInit(){this.changeUserDataForm=new t.cw({login:new t.NI("",[t.kI.minLength(4),t.kI.maxLength(12)],[f.B.isUniqueUsername(this.authService)]),password:new t.NI("",[t.kI.minLength(8),t.kI.maxLength(20),t.kI.required],[g.isValidPassword(this.authService)]),confirmPassword:new t.NI("",[t.kI.minLength(8),t.kI.maxLength(20)])},{updateOn:"blur"})}isFormValid(){return!(""!==this.usernameControl?.value||""!==this.confirmPasswordControl?.value)}deleteUser(){this.authService.deleteUser().subscribe(()=>{this.store$.dispatch((0,d.ls)()),this.localStorage.clear(),this.router.navigate(["auth"],{replaceUrl:!0}).catch()})}changeUserAvatar(){this.authService.changeUserData({image:this.newAvatar}).subscribe(()=>{this.store$.dispatch((0,d.ls)()),this.localStorage.clear(),this.router.navigate(["auth"],{replaceUrl:!0}).catch()})}changeUserData(){const o={};this.usernameControl.value&&(o.username=this.usernameControl.value),this.confirmPasswordControl.value&&(o.password=this.confirmPasswordControl.value),this.authService.changeUserData(o).subscribe(()=>{this.store$.dispatch((0,d.ls)()),this.localStorage.clear(),this.router.navigate(["auth"],{replaceUrl:!0}).catch()})}}l.\u0275fac=function(o){return new(o||l)(u.Y36(v.yh),u.Y36(D.e),u.Y36(i.F0),u.Y36(U.o),u.Y36(b.n))},l.\u0275cmp=u.Xpm({type:l,selectors:[["app-dashboard-form"]],decls:27,vars:8,consts:[[1,"form"],[1,"form__form","form__form_top",3,"formGroup"],[1,"btn",3,"click"],["matInput","","type","text","formControlName","login",1,"form__input"],["class","form__error",4,"ngIf"],["matInput","","type","password","formControlName","password",1,"form__input"],["matInput","","type","password","formControlName","confirmPassword",1,"form__input"],["type","submit",1,"form__btn",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],[1,"form__error"]],template:function(o,r){1&o&&(u.TgZ(0,"div",0)(1,"form",1),u._UZ(2,"app-set-picture"),u.TgZ(3,"button",2),u.NdJ("click",function(){return r.changeUserAvatar()}),u._uU(4,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"),u.qZA(),u.TgZ(5,"mat-form-field")(6,"mat-label"),u._uU(7,"\u041d\u043e\u0432\u044b\u0439 \u043b\u043e\u0433\u0438\u043d:"),u.qZA(),u._UZ(8,"input",3),u.YNc(9,w,2,0,"span",4),u.YNc(10,B,2,0,"span",4),u.YNc(11,P,2,0,"span",4),u.qZA(),u.TgZ(12,"mat-form-field")(13,"mat-label"),u._uU(14," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),u.qZA(),u._UZ(15,"input",5),u.YNc(16,T,2,0,"span",4),u.qZA(),u.TgZ(17,"mat-form-field")(18,"mat-label"),u._uU(19," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c:"),u.qZA(),u._UZ(20,"input",6),u.YNc(21,E,2,0,"span",4),u.YNc(22,I,2,0,"span",4),u.qZA(),u.TgZ(23,"button",7),u.NdJ("click",function(){return r.changeUserData()}),u._uU(24," \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c "),u.qZA(),u.TgZ(25,"button",8),u.NdJ("click",function(){return r.deleteUser()}),u._uU(26," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 "),u.qZA()()()),2&o&&(u.xp6(1),u.Q6J("formGroup",r.changeUserDataForm),u.xp6(8),u.Q6J("ngIf",null==r.usernameControl||null==r.usernameControl.errors?null:r.usernameControl.errors.minlength),u.xp6(1),u.Q6J("ngIf",null==r.usernameControl||null==r.usernameControl.errors?null:r.usernameControl.errors.maxlength),u.xp6(1),u.Q6J("ngIf",null==r.usernameControl||null==r.usernameControl.errors?null:r.usernameControl.errors.isUserExist),u.xp6(5),u.Q6J("ngIf",null==r.passwordControl||null==r.passwordControl.errors?null:r.passwordControl.errors.isPasswordValid),u.xp6(5),u.Q6J("ngIf",null==r.confirmPasswordControl||null==r.confirmPasswordControl.errors?null:r.confirmPasswordControl.errors.minlength),u.xp6(1),u.Q6J("ngIf",null==r.confirmPasswordControl||null==r.confirmPasswordControl.errors?null:r.confirmPasswordControl.errors.maxlength),u.xp6(1),u.Q6J("disabled",r.changeUserDataForm.invalid||r.changeUserDataForm.pending||!r.changeUserDataForm.touched||(null==r.confirmPasswordControl||null==r.confirmPasswordControl.errors?null:r.confirmPasswordControl.errors.minlength)||(null==r.usernameControl||null==r.usernameControl.errors?null:r.usernameControl.errors.minlength)||r.isFormValid()))},dependencies:[p.O5,F.j,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,Z.Nt,c.KE,c.hX,A.lW]});class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275cmp=u.Xpm({type:m,selectors:[["app-dashboard-page"]],decls:3,vars:1,consts:[[1,"btn","btn_dashboard",3,"routerLink"]],template:function(o,r){1&o&&(u.TgZ(0,"button",0),u._uU(1," \u041a \u0432\u044b\u0431\u043e\u0440\u0443 \u043b\u043e\u0431\u0431\u0438\n"),u.qZA(),u._UZ(2,"app-dashboard-form")),2&o&&u.Q6J("routerLink","/lobbies")},dependencies:[i.rH,l],styles:[".btn_dashboard[_ngcontent-%COMP%]{margin-bottom:20px}"]});var J=a(4466),N=a(793);class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=u.oAB({type:s}),s.\u0275inj=u.cJS({imports:[p.ez,J.m,t.UX,N.q,i.Bz.forChild([{path:"",component:m}])]})}}]);